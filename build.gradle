plugins {
    id 'application'
    id 'org.beryx.jlink' version '3.1.1'
}

repositories {
    mavenCentral()
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

/* ---- JavaFX ë²„ì „/í”Œë«í¼ ë¶„ê¸° ---- */
ext {
    javafxVer = '21.0.4'
    def os = org.gradle.internal.os.OperatingSystem.current()
    javafxClassifier = os.isMacOsX()
            ? (System.getProperty("os.arch").contains("aarch64") ? "mac-aarch64" : "mac")
            : (os.isWindows() ? "win" : "linux")
}

application {
    // JavaFX ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
    mainClass = 'com.example.organizer.App'
}

/* ---- í•µì‹¬ í¬ì¸íŠ¸: JavaFX base/graphics/controlsë§Œ ì˜ì¡´ ----
   (FXML ì•ˆ ì“°ë©´ fxml ì˜ì¡´ ì œê±°í•´ì•¼ Windows jlinkê°€ ì•ˆ í„°ì§) */
dependencies {
    implementation "org.openjfx:javafx-base:${javafxVer}:${javafxClassifier}"
    implementation "org.openjfx:javafx-graphics:${javafxVer}:${javafxClassifier}"
    implementation "org.openjfx:javafx-controls:${javafxVer}:${javafxClassifier}"
    // FXMLì„ ì‹¤ì œë¡œ ì•ˆ ì“°ë©´ ì´ ì¤„ì€ ìƒëµ ê°€ëŠ¥
    // implementation "org.openjfx:javafx-fxml:${javafxVer}:${javafxClassifier}"

    implementation "org.xerial:sqlite-jdbc:3.46.0.1"
}

jlink {
    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']
    launcher { name = 'TodoProgram' }

    // ğŸ”§ JavaFX ëª¨ë“ˆë“¤ì„ jlinkê°€ ìë™ìœ¼ë¡œ ëŒì–´ì˜¤ê²Œ í•¨
    addExtraDependencies("javafx")
}
